{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49829256-73c1564e94f64863eabbb2525';\n\nlet page = 1;\nlet limit = 15;\n\nexport async function getImagesByQuery(query, page = 1, per_page = 15) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page,\n    };\n\n    try {\n        const resp = await axios.get(BASE_URL, { params });\n        return resp.data;\n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong. Please try again later.',\n        });\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst box = new SimpleLightbox('.gallery a');\n\nconst gallery = document.querySelector('.gallery');\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function createGallery(images) {\n\n    const markup = images.map((image) => {\n        return `<li class=\"g-item\">\n        <a href=\"${image.largeImageURL}\"><img class=\"g-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n        <ul class=\"g-list\">\n        <li class=\"g-list-item\"><span class=\"text\">Likes</span> <span class=\"num\">${image.likes}</span></li>\n        <li class=\"g-list-item\"><span class=\"text\">Views</span> <span class=\"num\">${image.views}</span></li>\n        <li class=\"g-list-item\"><span class=\"text\">Comments</span> <span class=\"num\">${image.comments}</span></li>\n        <li class=\"g-list-item\"><span class=\"text\">Downloads</span> <span class=\"num\">${image.downloads}</span></li>\n        </ul>\n        </li>`\n    }).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    box.refresh();\n    \n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\nimport { clearGallery } from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input');\nconst loader = document.querySelector('.loader');\nconst btn = document.querySelector('.btn')\n\nlet page = 1;\nconst limit = 15;\nlet query = '';\n\nfunction showLoader() {\n    loader.style.display = 'flex';\n}\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\n    btn.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n    btn.style.display = 'none';\n}\n\nfunction insertEndMessage() {\n  const messageHTML = `<p class=\"end-message\">We're sorry, but you've reached the end of search results.</p>`;\n  document.querySelector('.gallery').insertAdjacentHTML('afterend', messageHTML);\n}\n\nfunction removeEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) endMessage.remove();\n}\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    showLoader();\n\n    query = input.value.trim();\n    page = 1;\n\n    removeEndMessage();\n\n    if (!query) {\n        iziToast.warning({\n            message: 'Please, enter a search query',\n            color: 'yellow',\n            position: 'topRight',\n        })\n        hideLoader();\n        return;\n    }\n\n    try {\n        const data = await getImagesByQuery(query, page, limit);\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'yellow',\n                position: 'topRight',\n            })\n            return;\n        }\n\n        clearGallery();\n        createGallery(data.hits);\n        showLoadMoreButton();\n\n        if (data.hits.length < limit) {\n            hideLoadMoreButton();\n            insertEndMessage();\n        }\n        \n    } catch (error) {\n        iziToast.error({\n            message: 'Something went wrong :(',\n            position: 'topRight',\n        })\n    } finally {\n        hideLoader();\n    }\n});\n\n\n\nbtn.addEventListener('click', async (event) => {\n    event.preventDefault();\n\n    page += 1;\n\n    try {\n        const data = await getImagesByQuery(query, page, limit);\n\n        createGallery(data.hits);\n\n        const { height: cardHeight } = document\n            .querySelector('.gallery li')\n            .getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        if (page * limit >= data.totalHits) {\n            hideLoadMoreButton();\n\n            if (!document.querySelector('.end-message')) {\n                insertEndMessage();\n            }\n        }\n\n    } catch (error) {\n        iziToast.error({\n            message: 'Failed to load more images.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n\n\n\n});"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","per_page","params","axios","iziToast","box","SimpleLightbox","gallery","clearGallery","createGallery","images","markup","image","form","input","loader","btn","limit","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","insertEndMessage","removeEndMessage","endMessage","event","data","cardHeight"],"mappings":"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"}